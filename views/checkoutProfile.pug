extends layout

block content
    .container
        #profilePage
            .jumbotron
                .row
                    .col-6
                        #profilepageImage
                            img(src='/images/blank-profile-picture.png' width="96" height="96")
                #userDetails
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5.first-name First name:
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold #{firstname}
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5.last-name Last name:
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold #{lastname}
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5.username Username:
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold #{username}
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5.email Email:
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold #{email}
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5.rating Rating:
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold.stars(data-rating=Math.round(rating/votes))
                                span.star &nbsp;
                                span.star &nbsp;
                                span.star &nbsp;
                                span.star &nbsp;
                                span.star &nbsp;
                            script.
                                //initial setup
                                document.addEventListener('DOMContentLoaded', function () {
                                    let stars = document.querySelectorAll('.star');
                                    stars.forEach(function (star) {
                                        star.addEventListener('show', setRating);
                                    });
                                    let rating = parseInt(document.querySelector('.stars').getAttribute('data-rating'));
                                    let target = stars[rating - 1];
                                    target.dispatchEvent(new MouseEvent('show'));
                                });
                                function setRating(ev) {
                                    let span = ev.currentTarget;
                                    let stars = document.querySelectorAll('.star');
                                    let match = false;
                                    let num = 0;
                                    stars.forEach(function (star, index) {
                                        if (match) {
                                            star.classList.remove('rated');
                                        } else {
                                            star.classList.add('rated');
                                        }
                                        if (star === span) {
                                            match = true;
                                            num = index + 1;
                                        }
                                    });
                                    document.querySelector('.stars').setAttribute('data-rating', num);
                                }
                    .row.offset-1
                        .col-xs-4.col-sm-4.col-md-4
                            h5
                        .col-xs-8.col-sm-8.col-md-8
                            h5.font-weight-bold (#{votes} votes)